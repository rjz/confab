<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="style.css" />
    <title>confab</title>
  </head>
  <body>
  <a href="https://github.com/rjz/confab"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
    <div class="content">
      <section class="container">
        <h1><a name="top"></a>confab</h1>

        <div>
          <p>A tool for describing application configurations!</p>
        </div>

        <h3>Contents</h3>
        <ul>
          <li><a href="https://github.com/rjz/confab">Source code</a></li>
          <li><a href="https://github.com/rjz/confab/tree/master/README.md">Readme</a></li>
          <li><a href="https://github.com/rjz/confab/tree/master/LICENSE">License (MIT)</a></li>
            <li>
              <a href="#confab">confab</a>
              <ul>
                <li>
                  <a href="#confab-confab"><code>confab</code></a>
                </li>
              </ul>
            </li>
            <li>
              <a href="#transforms">transforms</a>
              <ul>
                <li>
                  <a href="#transforms-loadJSON"><code>loadJSON</code></a>
                </li>
                <li>
                  <a href="#transforms-loadEnvironment"><code>loadEnvironment</code></a>
                </li>
                <li>
                  <a href="#transforms-assign"><code>assign</code></a>
                </li>
                <li>
                  <a href="#transforms-required"><code>required</code></a>
                </li>
                <li>
                  <a href="#transforms-defaults"><code>defaults</code></a>
                </li>
                <li>
                  <a href="#transforms-freeze"><code>freeze</code></a>
                </li>
              </ul>
            </li>
        </ul>

        <h3 id="convention-and-configuration">Convention and Configuration</h3>

        <p>Confab is configuration-first by nature, as the details of configuration may
        vary widely from one project to the next. Nevertheless, the built-in
        transformations reflect certain opinions.</p>
        <p>Namely, configuration should be:</p>
        <ul>
          <li><p><strong>separate</strong>. Keeping configuration isolated from application logic eases
          deployment across multiple environments. Confab encourages developers to
          author complete configurations independent of the application.</p>
          </li>
          <li><p><strong>predictable</strong>. Like any other exception, errors in configuration should be
          immediately fatal. All confab transformations will fail immediately if
          unexpected conditions are encountered, while the <a href="http://rjz.github.io/confab/#transforms-required"><code>required</code></a>
          transformation can assert the presence of certain configuration keys.
          Similarly, the <a href="http://rjz.github.io/confab/#transforms-defaults"><code>defaults</code></a> transformation--while
          unquestionably useful--should be approached with care.</p>
          </li>
          <li><p><strong>immutable</strong>. The running application should not be concerned with
          configuration changes: if a change must be applied it should be applied to a
          new process. The <a href="http://rjz.github.io/confab/#transforms-freeze"><code>freeze</code></a> transformation guarantees that a
          config will not change after initialization.</p>
          </li>
          <li><p><strong>simple</strong>. File-based configs (JSON, YAML, etc.) make
          it easy to nest data inside multiple levels of keys. This is convenient for
          grouping like data, but it is not immediately clear how these data would map
          to (e.g.) environment variables or command-line arguments.
          Sub-configurations can enhance separation between unrelated concerns, but
          they should be used with care.</p>
          </li>
        </ul>
        <h4 id="and-one-non-opinion">And one non-opinion</h4>
        <ul>
          <li>Command-line parsing, and what impact (if any) arguments should have on the
          configuration is left as a project-specific decision. No transformations
          are provided for command-line support--but you can write your own!</li>
        </ul>


          <hr />
          <a name="confab"></a>
          <a name="confab-confab"></a>
            <section>
              <header>
                <ul class="pull-right nav-meta nav-inline">
                  <li><a href="#confab">confab</a></li>
                  <li><a href="#top">top</a></li>
                </ul>
            
                <h3>
                  <a name="confab"></a><code>confab</code>
                  <small>(<a href="https://github.com/rjz/confab/tree/master/index.js#L6">definition</a>)</small>
                </h3>
              </header>
              <div>
            
                <p>Build a configuration object from a list of transformations:</p>

<pre><code> var confab = require('confab');
 var config = confab([
   confab.loadJSON([
     './config.' + process.env.NODE_ENV + '.json',
     './config.json'
   ]),

   confab.defaults({
     role: 'api',
     port: 3200
   })
 ]);
</code></pre>

<p>Later, access the configuration exactly as you would expect.</p>

<pre><code> console.log(config.role); // 'api'
</code></pre>
            
            
                <h4>Arguments</h4>
                <table>
                  <tr>
                    <th width="15%">Type</th>
                    <th width="15%">Name</th>
                    <th width="60%">Description</th>
                  </tr>
                  <tr>
                    <td><code>Array</code></td>
                    <td>transforms</td>
                    <td>a list of transformation functions</td>
                  </tr>
    </table>

            
              </div>
            
            </section>
            
          <hr />
          <a name="transforms"></a>
          <a name="transforms-loadJSON"></a>
            <section>
              <header>
                <ul class="pull-right nav-meta nav-inline">
                  <li><a href="#transforms">transforms</a></li>
                  <li><a href="#top">top</a></li>
                </ul>
            
                <h3>
                  <a name="loadJSON"></a><code>loadJSON</code>
                  <small>(<a href="https://github.com/rjz/confab/tree/master/lib/transforms.js#L7">definition</a>)</small>
                </h3>
              </header>
              <div>
            
                <p>Load a configuration from a list of candidate files.</p>

<p>Attempts to load a configuration file from the list of locations. Throws a
<code>ReferenceError</code> if configuration cannot be loaded from any of the specified
paths.</p>

<pre><code>var loadJSONTransform = confab.loadJSON([
 './config.json',
  __dirname + '/config.json',
  process.env.HOME + '/config.json'
]);
</code></pre>
            
            
                <h4>Arguments</h4>
                <table>
                  <tr>
                    <th width="15%">Type</th>
                    <th width="15%">Name</th>
                    <th width="60%">Description</th>
                  </tr>
                  <tr>
                    <td><code>Array|String</code></td>
                    <td>paths</td>
                    <td>one or more paths to search for an appropriate config file</td>
                  </tr>
    </table>

            
              </div>
            
            </section>
            
          <a name="transforms-loadEnvironment"></a>
            <section>
              <header>
                <ul class="pull-right nav-meta nav-inline">
                  <li><a href="#transforms">transforms</a></li>
                  <li><a href="#top">top</a></li>
                </ul>
            
                <h3>
                  <a name="loadEnvironment"></a><code>loadEnvironment</code>
                  <small>(<a href="https://github.com/rjz/confab/tree/master/lib/transforms.js#L49">definition</a>)</small>
                </h3>
              </header>
              <div>
            
                <p>Map environment variables (if available) to keys in the config.</p>

<pre><code>var envTransform = confab.loadEnvironment({
  'NODE_ENV': 'environment',
  'PORT': 'port'
});
</code></pre>
            
            
                <h4>Arguments</h4>
                <table>
                  <tr>
                    <th width="15%">Type</th>
                    <th width="15%">Name</th>
                    <th width="60%">Description</th>
                  </tr>
                  <tr>
                    <td><code>Object</code></td>
                    <td>map</td>
                    <td>a list of environment variables to map to config keys</td>
                  </tr>
    </table>

            
              </div>
            
            </section>
            
          <a name="transforms-assign"></a>
            <section>
              <header>
                <ul class="pull-right nav-meta nav-inline">
                  <li><a href="#transforms">transforms</a></li>
                  <li><a href="#top">top</a></li>
                </ul>
            
                <h3>
                  <a name="assign"></a><code>assign</code>
                  <small>(<a href="https://github.com/rjz/confab/tree/master/lib/transforms.js#L83">definition</a>)</small>
                </h3>
              </header>
              <div>
            
                <p>Merge an object with the existing config</p>

<pre><code>var envTransform = confab.assign({
  port: '1492'
});
</code></pre>
            
            
                <h4>Arguments</h4>
                <table>
                  <tr>
                    <th width="15%">Type</th>
                    <th width="15%">Name</th>
                    <th width="60%">Description</th>
                  </tr>
                  <tr>
                    <td><code>Object</code></td>
                    <td>obj</td>
                    <td>an object to merge into the config</td>
                  </tr>
      <tr>
                    <td><code>Object</code></td>
                    <td>obj2...</td>
                    <td>additional objects to merge into the config</td>
                  </tr>
    </table>

            
              </div>
            
            </section>
            
          <a name="transforms-required"></a>
            <section>
              <header>
                <ul class="pull-right nav-meta nav-inline">
                  <li><a href="#transforms">transforms</a></li>
                  <li><a href="#top">top</a></li>
                </ul>
            
                <h3>
                  <a name="required"></a><code>required</code>
                  <small>(<a href="https://github.com/rjz/confab/tree/master/lib/transforms.js#L114">definition</a>)</small>
                </h3>
              </header>
              <div>
            
                <p>List required config fields and throw a <code>ReferenceError</code> with a list of any
missing fields. If all fields are present, <code>required</code> acts as a pass-through.</p>
            
            
                <h4>Arguments</h4>
                <table>
                  <tr>
                    <th width="15%">Type</th>
                    <th width="15%">Name</th>
                    <th width="60%">Description</th>
                  </tr>
                  <tr>
                    <td><code>Array</code></td>
                    <td>required</td>
                    <td>the names of required fields in the config</td>
                  </tr>
    </table>

            
              </div>
            
            </section>
            
          <a name="transforms-defaults"></a>
            <section>
              <header>
                <ul class="pull-right nav-meta nav-inline">
                  <li><a href="#transforms">transforms</a></li>
                  <li><a href="#top">top</a></li>
                </ul>
            
                <h3>
                  <a name="defaults"></a><code>defaults</code>
                  <small>(<a href="https://github.com/rjz/confab/tree/master/lib/transforms.js#L138">definition</a>)</small>
                </h3>
              </header>
              <div>
            
                <p>Fill in any missing values in config with specified defaults</p>

<pre><code>var defaultsTransform = confab.defaults({
  port: 3200,
  logLevel: 'debug'
});
</code></pre>
            
            
                <h4>Arguments</h4>
                <table>
                  <tr>
                    <th width="15%">Type</th>
                    <th width="15%">Name</th>
                    <th width="60%">Description</th>
                  </tr>
                  <tr>
                    <td><code>Object</code></td>
                    <td>defaults</td>
                    <td>default values to fill into the config</td>
                  </tr>
      <tr>
                    <td><code>Boolean</code></td>
                    <td>warn</td>
                    <td>(Optional) print warning to `stdout` when a default value is being used</td>
                  </tr>
    </table>

            
              </div>
            
            </section>
            
          <a name="transforms-freeze"></a>
            <section>
              <header>
                <ul class="pull-right nav-meta nav-inline">
                  <li><a href="#transforms">transforms</a></li>
                  <li><a href="#top">top</a></li>
                </ul>
            
                <h3>
                  <a name="freeze"></a><code>freeze</code>
                  <small>(<a href="https://github.com/rjz/confab/tree/master/lib/transforms.js#L168">definition</a>)</small>
                </h3>
              </header>
              <div>
            
                <p>Freeze the config (hint: run this transformation last!)</p>
            
            
            
              </div>
            
            </section>
            

      </section>
    </div>
    <footer class="dark">
      <p class="copyright">
        Another unrepentant production from <a href="http://rjzaworski.com">rj zaworski</a>
      </p>
    </footer>
  </body>
</html>

